# Version Control Guide for Speckit Repositories

## Files That MUST Be Tracked

### Core Speckit Configuration
- ✅ `.specify/memory/constitution.md` - Project constitution and principles
- ✅ `.specify/templates/*.md` - All template files (spec, plan, tasks, checklist, etc.)
- ✅ `.specify/scripts/` - All automation scripts (bash, etc.)

### Feature Documentation
- ✅ `specs/**/spec.md` - Feature specifications (hand-written or agent-generated)
- ✅ `specs/**/plan.md` - Implementation plans (generated by `/speckit.plan`)
- ✅ `specs/**/research.md` - Research notes (generated by `/speckit.plan`)
- ✅ `specs/**/data-model.md` - Data models (generated by `/speckit.plan`)
- ✅ `specs/**/tasks.md` - Task breakdowns (generated by `/speckit.tasks`)
- ✅ `specs/**/checklists/` - All checklist files
- ✅ `specs/**/contracts/` - API contracts (if applicable)
- ✅ `specs/**/quickstart.md` - Quick start guides (if generated)

### Project Files
- ✅ `README.md` - Project readme
- ✅ `.gitignore` - Git ignore rules
- ✅ `.github/prompts/` - GitHub Copilot prompts (if using)
- ✅ Source code files in `src/`, `lib/`, or project-specific directories

## Files That Should NOT Be Tracked

### Agent Context Files (Regenerated Each Run)
- ❌ `.specify/memory/agent-context.md` - Auto-generated development guidelines
- ❌ `.specify/memory/*-context.md` - Any other context files
- ❌ `.specify/tmp/` or `.specify/temp/` - Temporary files

### Build Artifacts
- ❌ `dist/`, `build/`, `out/`, `target/` - Compiled/built files
- ❌ `*.min.css`, `*.min.js` - Minified files (unless you're distributing)
- ❌ `*.map` - Source maps

### Dependencies
- ❌ `node_modules/` - Node.js dependencies (use package.json instead)
- ❌ `venv/`, `env/` - Python virtual environments (use requirements.txt)

### Environment & Secrets
- ❌ `.env*` files - Environment variables (document template in README instead)
- ❌ `*.key`, `*.pem` - Private keys and certificates
- ❌ `secrets/`, `credentials/` - Any secrets directories

### OS & Editor Files
- ❌ `.DS_Store`, `Thumbs.db` - OS-generated files
- ❌ `.vscode/*` (except settings you want to share)
- ❌ `.idea/` - IDE configuration
- ❌ `*.swp`, `*~` - Editor temporary files

## Rationale

### Why Track Generated Files (plan.md, tasks.md, etc.)?

Generated documentation files ARE tracked because:
1. **Historical Record**: Shows evolution of feature planning over time
2. **Team Collaboration**: Other team members see the complete implementation plan
3. **Offline Work**: Plans remain available without re-running agent commands
4. **Reproducibility**: Complete project history in version control
5. **Review Process**: Plans can be reviewed and modified before implementation

### Why NOT Track agent-context.md?

The `agent-context.md` file is NOT tracked because:
1. **Regenerated**: Built dynamically from other tracked files (constitution, plans, templates)
2. **Runtime Artifact**: Only needed during agent execution
3. **Reduces Conflicts**: Avoids merge conflicts on auto-generated summaries
4. **Single Source of Truth**: Constitution and plans are the source; context is derived

## Quick Check Commands

```bash
# See what's tracked
git ls-files

# See what's ignored
git status --ignored

# Check if a specific file is ignored
git check-ignore -v <filepath>

# Add everything that should be tracked
git add .specify/memory/constitution.md
git add .specify/templates/
git add .specify/scripts/
git add specs/
git add README.md
git add .gitignore
```

## Common Workflow

1. **After creating constitution**: `git add .specify/memory/constitution.md`
2. **After creating spec**: `git add specs/###-feature-name/spec.md specs/###-feature-name/checklists/`
3. **After generating plan**: `git add specs/###-feature-name/plan.md specs/###-feature-name/research.md`
4. **After generating tasks**: `git add specs/###-feature-name/tasks.md`
5. **Ignore agent context**: It's already in .gitignore, nothing to do

## Branch Strategy

- `master` or `main`: Stable, reviewed specifications and implementations
- `###-feature-name`: Feature branches created by `/speckit.specify`
- Merge feature branch after specification is approved and implementation complete
